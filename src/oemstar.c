////////////////////////////////////////////////////////////////////////////////
/// @file
/// @brief 
////////////////////////////////////////////////////////////////////////////////

// *****************************************************************************
// ************************** System Include Files *****************************
// *****************************************************************************

// *****************************************************************************
// ************************** User Include Files *******************************
// *****************************************************************************

#include <xc.h>
#include <sys/attribs.h>
#include "oemstar.h"

// *****************************************************************************
// ************************** Defines ******************************************
// *****************************************************************************

typedef struct
{
    uint8_t  sync_0;
    uint8_t  sync_1;
    uint8_t  sync_2;
    
    uint8_t  header_len;
    uint8_t  msg_id;
    uint8_t  msg_type;
    uint8_t  port;
    uint16_t msg_len;
    uint16_t seq;
    uint8_t  idle_time;
    uint8_t  time_stat;
    uint16_t week;
    uint32_t ms;
    uint32_t rx_stat;
    uint16_t resv;
    uint16_t sw_ver;
    
}  __attribute__ ((packed)) OEMSTAR_HEADER;

// *****************************************************************************
// ************************** Definitions **************************************
// *****************************************************************************

// *****************************************************************************
// ************************** Function Prototypes ******************************
// *****************************************************************************

// *****************************************************************************
// ************************** Global Functions *********************************
// *****************************************************************************

// Header length is variable

// RANGE: the first 32-bit word is the # of satellites. This value needs to
// be inspected to identify the length of the binary data.

// SATXYZ: Bytes 8-12 of the data is the # of satellites.




void OEMStarInit( void )
{
    // Any initialization needed with the GPS ???
}


// Forward received UDP messages (i.e. COMMANDS) to the GPS, and forward UART messages (i.e. LOGS) from the GPS
// to UDP.
void OEMStarTask()
{
    // CAN ASSUME THAT AN ENTIRE PACKET WILL BE RECEIVED FROM THE ETHERNET.
    // IF UDPGETARRAY IS CALLED, AND INTIRE PACKET WILL BE READ.
    
    
    
    
}


// *****************************************************************************
// ************************** Static Functions *********************************
// *****************************************************************************